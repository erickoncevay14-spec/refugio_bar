<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title> El Administrador</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    body { background-color: #f8f9fa; font-family: "Segoe UI", Roboto, sans-serif; }
    .sidebar { min-height: 100vh; background: #212529; }
    .sidebar a { color: #adb5bd; text-decoration: none; padding: 10px 15px; display: block; border-radius: .375rem; }
    .sidebar a:hover, .sidebar a.active { background: #343a40; color: #fff; }
    .sidebar .logo { font-weight: bold; font-size: 1.25rem; color: #fff; padding: 15px; text-align: center; border-bottom: 1px solid #343a40; }
    .content { padding: 20px; }
  </style>
</head>
<script src="/js/services/apiService.js"></script>
<script src="/js/services/authService.js"></script>
<script src="/js/services/productoService.js"></script>
<script src="/js/services/pedidoService.js"></script>
<body>
<div class="container-fluid">
  <div class="row">
    <!-- Sidebar -->
    <nav id="sidebar" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
      <div class="logo">üç∏ Bar El Refugio</div>
      <ul class="nav flex-column mt-3">
        <li><a class="active" href="#"><i class="bi bi-speedometer2 me-2"></i>Panel</a></li>
        <li><a href="#"><i class="bi bi-cash-coin me-2"></i>Ventas</a></li>
        <li><a href="#"><i class="bi bi-receipt me-2"></i>Pedidos</a></li>
        <li><a href="#"><i class="bi bi-people me-2"></i>Clientes</a></li>
        <li><a href="#"><i class="bi bi-box-seam me-2"></i>Inventario</a></li>
        <li><a href="#"><i class="bi bi-calendar-event me-2"></i>Reservas</a></li>
        <li><a href="#"><i class="bi bi-person-gear me-2"></i>Personal</a></li>
        <li><a href="#"><i class="bi bi-gear me-2"></i>Configuraci√≥n</a></li>
      </ul>
    </nav>

    <!-- Main content -->
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
      <!-- Topbar -->
      <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
        <h1 class="h4">Panel de Administrador</h1>
        <div class="d-flex align-items-center gap-3">
          <form class="d-none d-md-block">
            <input class="form-control form-control-sm" type="search" placeholder="Buscar..." aria-label="Buscar">
          </form>
          <div class="dropdown">
            <a href="#" class="d-flex align-items-center text-dark text-decoration-none dropdown-toggle" data-bs-toggle="dropdown">
              <i class="bi bi-person-circle fs-4 me-1"></i> Admin
            </a>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="#">Perfil</a></li>
              <li><a class="dropdown-item" href="#">Configuraci√≥n</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a id="logoutBtn" onclick="CerrarSesion()" class="dropdown-item text-danger" href="#"><i class="bi bi-box-arrow-right me-2"></i>Cerrar sesi√≥n</a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- KPIs -->
      <div class="row g-3">
        <div class="col-md-3">
          <div class="card text-bg-light shadow-sm">
            <div class="card-body">
              <i class="bi bi-currency-dollar fs-4 text-success"></i>
              <h5 class="card-title">Ventas hoy</h5>
              <p class="card-text fs-5 fw-bold">S/ 2,480</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-bg-light shadow-sm">
            <div class="card-body">
              <i class="bi bi-receipt-cutoff fs-4 text-primary"></i>
              <h5 class="card-title">Pedidos</h5>
              <p class="card-text fs-5 fw-bold">134</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-bg-light shadow-sm">
            <div class="card-body">
              <i class="bi bi-people fs-4 text-info"></i>
              <h5 class="card-title">Clientes en sala</h5>
              <p class="card-text fs-5 fw-bold">76</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card text-bg-light shadow-sm">
            <div class="card-body">
              <i class="bi bi-exclamation-triangle fs-4 text-warning"></i>
              <h5 class="card-title">Stock bajo</h5>
              <p class="card-text fs-5 fw-bold">9 productos</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Gr√°ficos -->
      <div class="row g-3 mt-3">
        <div class="col-md-8">
          <div class="card shadow-sm">
            <div class="card-header fw-bold"><i class="bi bi-graph-up me-1"></i> Ventas de la semana</div>
            <div class="card-body">
              <canvas id="salesChart" height="120"></canvas>
            </div>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card shadow-sm">
            <div class="card-header fw-bold"><i class="bi bi-pie-chart me-1"></i> Categor√≠as m√°s vendidas</div>
            <div class="card-body">
              <canvas id="categoryChart" height="200"></canvas>
            </div>
          </div>
        </div>
      </div>

      <!-- Pedidos recientes -->
      <h5 class="mt-4">Pedidos recientes</h5>
      <div class="table-responsive">
        <table class="table table-striped align-middle">
          <thead>
            <tr>
              <th>#</th>
              <th>Cliente</th>
              <th>Items</th>
              <th>Total</th>
              <th>Estado</th>
              <th>Hora</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>#9842</td>
              <td>Mar√≠a S.</td>
              <td>3</td>
              <td>S/ 68.00</td>
              <td><span class="badge bg-success">Pagado</span></td>
              <td>11:06</td>
            </tr>
            <tr>
              <td>#9841</td>
              <td>Jos√© P.</td>
              <td>5</td>
              <td>S/ 125.00</td>
              <td><span class="badge bg-info text-dark">En preparaci√≥n</span></td>
              <td>10:58</td>
            </tr>
            <tr>
              <td>#9840</td>
              <td>Cliente X</td>
              <td>2</td>
              <td>S/ 32.00</td>
              <td><span class="badge bg-warning text-dark">Por cobrar</span></td>
              <td>10:51</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Info lateral -->
      <div class="row g-3 mt-2">
        <div class="col-md-4">
          <div class="card shadow-sm">
            <div class="card-header fw-bold"><i class="bi bi-box-seam me-1"></i> Stock bajo</div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item d-flex justify-content-between">
                Ron A√±ejo 750ml <span class="badge bg-warning">6</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                Cerveza IPA 355ml <span class="badge bg-danger">2</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                Hielo 5kg <span class="badge bg-info">8</span>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card shadow-sm">
            <div class="card-header fw-bold"><i class="bi bi-calendar-event me-1"></i> Reservas</div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">
                12:30 ‚Äî Mesa 4 <span class="badge bg-success">Confirmada</span>
              </li>
              <li class="list-group-item">
                20:00 ‚Äî Terraza <span class="badge bg-secondary">Pendiente</span>
              </li>
            </ul>
          </div>
        </div>
        <div class="col-md-4">
          <div class="card shadow-sm">
            <div class="card-header fw-bold"><i class="bi bi-person-fill me-1"></i> Personal</div>
            <ul class="list-group list-group-flush">
              <li class="list-group-item">Luc√≠a (caja) <span class="badge bg-success">Activo</span></li>
              <li class="list-group-item">Carlos (barra) <span class="badge bg-success">Activo</span></li>
              <li class="list-group-item">Ana (sal√≥n) <span class="badge bg-info text-dark">Pr√≥ximo</span></li>
            </ul>
          </div>
        </div>
      </div>

      <footer class="text-center py-3 text-muted small">
        ¬© <span id="year"></span> Bar El Refugio ‚Äî Panel Admin
      </footer>
    </main>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Actualiza a√±o autom√°ticamente
  document.getElementById("year").textContent = new Date().getFullYear();

  // Ejemplo funcionalidad: cerrar sesi√≥n
  document.getElementById("logoutBtn").addEventListener("click", function(e){
    e.preventDefault();
    alert("Sesi√≥n cerrada correctamente.");
  });

  // Gr√°fico de ventas semanales
  const ctxSales = document.getElementById('salesChart');
  new Chart(ctxSales, {
    type: 'line',
    data: {
      labels: ['Lun','Mar','Mi√©','Jue','Vie','S√°b','Dom'],
      datasets: [{
        label: 'Ventas (S/)',
        data: [380, 420, 500, 460, 600, 750, 680],
        borderColor: 'rgba(13,110,253,0.9)',
        backgroundColor: 'rgba(13,110,253,0.2)',
        tension: 0.3,
        fill: true,
        pointRadius: 5,
        pointBackgroundColor: 'rgba(13,110,253,1)'
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { display: false } }
    }
  });
  // Gr√°fico de categor√≠as
  const ctxCat = document.getElementById('categoryChart');
  new Chart(ctxCat, {
    type: 'doughnut',
    data: {
      labels: ['Cervezas', 'C√≥cteles', 'Piqueos', 'Vinos', 'Otros'],
      datasets: [{
        data: [45, 25, 15, 10, 5],
        backgroundColor: ['#0d6efd','#20c997','#ffc107','#dc3545','#6c757d'],
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      plugins: { legend: { position: 'bottom' } }
    }
  });
</script>
<script src="../../JS/Admin/Admin.js"></script>
</body>
</html>